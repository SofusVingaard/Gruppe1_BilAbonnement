<!DOCTYPE html>
<html lang="da" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Lejeaftaler</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
  <link rel="stylesheet" th:href="@{/css/dashboard.css}">
  <link rel="stylesheet" th:href="@{/css/header.css}">
</head>
<body>
<header>
  <div th:replace="~{fragments/header.html :: site-header}"></div>
</header>
<h1>Oversigt over lejeaftaler</h1>

<!-- Søgeformular -->
<form th:action="@{/rentalagreement/search}" method="post">
  <label for="phone">Telefonnummer:</label>
  <input type="text" id="phone" name="phoneNumber" placeholder="f.eks. 12345678"/>

  <label for="status">Status:</label>
  <select id="status" name="status">
    <option value="">Alle</option>
    <option value="active">Aktive</option>
    <option value="inactive">Inaktive</option>
  </select>

  <button type="submit">Søg</button>
</form>

<!-- Resultattabel -->
<table border="1">
  <thead>
  <tr>
    <th>ID</th>
    <th>Bil ID</th>
    <th>Kunde Tlf.</th>
    <th>Brugerlogin</th>
    <th>Startdato</th>
    <th>Slutdato</th>
    <th>Aktiv</th>
    <th>KM tilladt</th>
    <th>KM over</th>
    <th>Handling</th>

  </tr>
  </thead>
  <tbody>
  <tr th:each="agreement, iter : ${agreements}">
    <td th:text="${iter.count}">1</td>
    <td th:text="${agreement.id}">1</td>
    <td th:text="${agreement.car?.vehicleNumber}">2</td>
    <td th:text="${agreement.customer?.phoneNumber}">12345678</td>
    <td th:text="${agreement.user?.userLogin}">demo</td>
    <td th:text="${agreement.startDate}">2025-08-20</td>
    <td th:text="${agreement.endDate}">2026-08-20</td>
    <td th:text="${agreement.active ? 'Ja' : 'Nej'}">Ja</td>
    <td th:text="${agreement.allowedKM}">20000</td>
    <td th:text="${agreement.kmOverLimit}">500</td>
    <td>
      <a th:href="@{'/rentalAgreement/updateRentalAgreement/' + ${agreement.id}}">Rediger</a>
    </td>
  </tr>
  </tbody>
</table>

</body>
</html>